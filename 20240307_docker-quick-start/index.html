<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Docker Overview for Getting Started - JerrysBlog</title><meta name=Description content><meta property="og:title" content="Docker Overview for Getting Started"><meta property="og:description" content="Docker takes containerization a step further by providing additional encapsulation for file systems, network interconnections, process isolation, and more. Greatly simplifies the creation and maintenance of containers, making Docker technology more lightweight and faster compared to virtual machine technology."><meta property="og:type" content="article"><meta property="og:url" content="https://jerrysmd.github.io/20240307_docker-quick-start/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-03-07T10:39:35+08:00"><meta property="article:modified_time" content="2024-03-07T10:39:35+08:00"><meta property="og:site_name" content="JerrysBlog"><meta name=twitter:card content="summary"><meta name=twitter:title content="Docker Overview for Getting Started"><meta name=twitter:description content="Docker takes containerization a step further by providing additional encapsulation for file systems, network interconnections, process isolation, and more. Greatly simplifies the creation and maintenance of containers, making Docker technology more lightweight and faster compared to virtual machine technology."><meta name=application-name content="JerrysBlog"><meta name=apple-mobile-web-app-title content="JerrysBlog"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel=icon href=https://cdn-icons-png.flaticon.com/128/5584/5584593.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://jerrysmd.github.io/20240307_docker-quick-start/><link rel=prev href=https://jerrysmd.github.io/20240125_dontlearneverything/><link rel=next href=https://jerrysmd.github.io/20240308_automated-deploy-jenkins-docker/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Docker Overview for Getting Started","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/jerrysmd.github.io\/20240307_docker-quick-start\/"},"genre":"posts","keywords":"Docker, DevOps, CI\/CD, Linux","wordcount":1112,"url":"https:\/\/jerrysmd.github.io\/20240307_docker-quick-start\/","datePublished":"2024-03-07T10:39:35+08:00","dateModified":"2024-03-07T10:39:35+08:00","publisher":{"@type":"Organization","name":"xxxx","logo":"https:\/\/jerrysmd.github.io\/images\/avatar.png"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"light"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"light"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=JerrysBlog><span class=header-title-pre><i class='far fa-edit fa-fw' aria-hidden=true></i></span>JERRYSBLOG</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/ title=Home>Home </a><a class=menu-item href=/categories/technology/ title="Technology article list">Technology </a><a class=menu-item href=/categories/life/ title="Life article list">Life </a><a class=menu-item href=/tags/ title="Tags cloud">Tags </a><a class=menu-item href=/about/ title="About blog">About </a><a class=menu-item href=https://github.com/Jerrysmd/ title="My GitHub" rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw' aria-hidden=true></i> </a><a class=menu-item href="https://jerrysmd.notion.site/c36b33378ab44eaa8a4e0d51acb419cd?v=f866caf0636341839c3ddd977cbb4bfe&pvs=4" title="My Bookshelf" rel="noopener noreffer" target=_blank><i class='fa-solid fa-book-bookmark fa-sm fa-fw' aria-hidden=true></i> </a><a class=menu-item href=https://Jerrysmd.github.io/gallery title="My Gallery" rel="noopener noreffer" target=_blank><i class='fa-solid fa-images fa-sm fa-fw' aria-hidden=true></i> </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-moon fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=JerrysBlog><span class=header-title-pre><i class='far fa-edit fa-fw' aria-hidden=true></i></span>JERRYSBLOG</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/ title=Home>Home</a><a class=menu-item href=/categories/technology/ title="Technology article list">Technology</a><a class=menu-item href=/categories/life/ title="Life article list">Life</a><a class=menu-item href=/tags/ title="Tags cloud">Tags</a><a class=menu-item href=/about/ title="About blog">About</a><a class=menu-item href=https://github.com/Jerrysmd/ title="My GitHub" rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw' aria-hidden=true></i></a><a class=menu-item href="https://jerrysmd.notion.site/c36b33378ab44eaa8a4e0d51acb419cd?v=f866caf0636341839c3ddd977cbb4bfe&pvs=4" title="My Bookshelf" rel="noopener noreffer" target=_blank><i class='fa-solid fa-book-bookmark fa-sm fa-fw' aria-hidden=true></i></a><a class=menu-item href=https://Jerrysmd.github.io/gallery title="My Gallery" rel="noopener noreffer" target=_blank><i class='fa-solid fa-images fa-sm fa-fw' aria-hidden=true></i></a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-moon fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Docker Overview for Getting Started</h1><div class=post-meta><div class=post-meta-line><span class=post-category>Category
<a href=/categories/technology/><i class="far fa-folder fa-fw" aria-hidden=true></i>Technology</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2024-03-07>2024-03-07</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;1112 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;6 minutes&nbsp;<span id=/20240307_docker-quick-start/ class=leancloud_visitors data-flag-title="Docker Overview for Getting Started">
<i class="far fa-eye fa-fw" aria-hidden=true></i>&nbsp;<span class=leancloud-visitors-count></span>&nbsp;views
</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#what-is-docker>What is Docker</a></li><li><a href=#image--container>Image & Container</a></li><li><a href=#registry>Registry</a></li><li><a href=#command-example>Command Example</a></li><li><a href=#common-commands>Common Commands</a></li><li><a href=#data-volume>Data Volume</a></li><li><a href=#custom-java-image>Custom Java Image</a></li><li><a href=#layer>Layer</a><ul><li><a href=#cached-layers>Cached layers</a></li></ul></li><li><a href=#dockerfile>Dockerfile</a></li><li><a href=#network>Network</a></li></ul></nav></div></div><div class=content id=content><p>Docker takes containerization a step further by providing additional encapsulation for file systems, network interconnections, process isolation, and more. Greatly simplifies the creation and maintenance of containers, making Docker technology more lightweight and faster compared to virtual machine technology.</p><h2 id=what-is-docker>What is Docker</h2><p><figure><a class=lightgallery href=/20240307_docker-quick-start/virtualization.bfc621ce.png title=传统虚拟化 data-thumbnail=/20240307_docker-quick-start/virtualization.bfc621ce.png data-sub-html="<h2> </h2><p>传统虚拟化</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/20240307_docker-quick-start/virtualization.bfc621ce.png data-srcset="/20240307_docker-quick-start/virtualization.bfc621ce.png, /20240307_docker-quick-start/virtualization.bfc621ce.png 1.5x, /20240307_docker-quick-start/virtualization.bfc621ce.png 2x" data-sizes=auto alt=/20240307_docker-quick-start/virtualization.bfc621ce.png width=692 height=261></a><figcaption class=image-caption></figcaption></figure></p><p><figure><a class=lightgallery href=/20240307_docker-quick-start/docker.20496661.png title=Docker data-thumbnail=/20240307_docker-quick-start/docker.20496661.png data-sub-html="<h2> </h2><p>Docker</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/20240307_docker-quick-start/docker.20496661.png data-srcset="/20240307_docker-quick-start/docker.20496661.png, /20240307_docker-quick-start/docker.20496661.png 1.5x, /20240307_docker-quick-start/docker.20496661.png 2x" data-sizes=auto alt=/20240307_docker-quick-start/docker.20496661.png width=689 height=195></a><figcaption class=image-caption></figcaption></figure></p><h2 id=image--container>Image & Container</h2><p>The relationship between an <code>Image</code> and a <code>Container</code> is similar to the relationship between a <code>Class</code> and an <code>Instance</code> in object-oriented programming. An image is a static definition, while a container is a running instance of the image. Containers can be created, started, stopped, deleted, paused, and so on.</p><p>When we install an application with Docker, Docker automatically searches for and downloads the application <code>image</code>. An image <strong>not only includes the application itself but also the required environment, configurations, and system libraries</strong> for the application to run. Docker creates an <strong>isolated environment</strong> called a <code>container</code> when running the image.</p><p><figure><a class=lightgallery href=/20240307_docker-quick-start/image-20240308105238561.png title=image-20240308105238561 data-thumbnail=/20240307_docker-quick-start/image-20240308105238561.png data-sub-html="<h2> </h2><p>image-20240308105238561</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/20240307_docker-quick-start/image-20240308105238561.png data-srcset="/20240307_docker-quick-start/image-20240308105238561.png, /20240307_docker-quick-start/image-20240308105238561.png 1.5x, /20240307_docker-quick-start/image-20240308105238561.png 2x" data-sizes=auto alt=/20240307_docker-quick-start/image-20240308105238561.png width=1445 height=507></a><figcaption class=image-caption></figcaption></figure></p><p><figure><a class=lightgallery href=/20240307_docker-quick-start/alexxubyte.gif title=alexxubyte data-thumbnail=/20240307_docker-quick-start/alexxubyte.gif data-sub-html="<h2> </h2><p>alexxubyte</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/20240307_docker-quick-start/alexxubyte.gif data-srcset="/20240307_docker-quick-start/alexxubyte.gif, /20240307_docker-quick-start/alexxubyte.gif 1.5x, /20240307_docker-quick-start/alexxubyte.gif 2x" data-sizes=auto alt=/20240307_docker-quick-start/alexxubyte.gif width=1280 height=1280></a><figcaption class=image-caption></figcaption></figure></p><h2 id=registry>Registry</h2><p>After the image is built, it can be easily run on the current host machine. However, if we need to use this image on other servers, we need a centralized storage and distribution service for images, and <strong>Docker Registry</strong> is such a service.</p><p>A <code>Docker Registry</code> can contain multiple <code>repositories</code>, and each repository can contain multiple <code>tags</code>. Each tag corresponds to an image.</p><p>In addition to using Docker Registry as a <strong>public service</strong>, users can also set up a <strong>private</strong> Docker Registry locally.</p><h2 id=command-example>Command Example</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>docker run -d <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	--name mysql <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	-p 3306:3306 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	-e <span class=nv>TZ</span><span class=o>=</span>Asia/Shanghai <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	-e MYSQL_ROOT_PASSWORD <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	mysql:5.7
</span></span></code></pre></td></tr></table></div></div><ul><li><p><code>docker run</code>: Create and Run a <strong>Container</strong>, <code>-d</code> means run the container in the background</p></li><li><p><code>--name</code>: Name the <strong>Container</strong>, must be unique</p></li><li><p><code>-p</code>: To set port mapping</p><p><figure><a class=lightgallery href=/20240307_docker-quick-start/image-20240308112314603.png title=image-20240308112314603 data-thumbnail=/20240307_docker-quick-start/image-20240308112314603.png data-sub-html="<h2> </h2><p>image-20240308112314603</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/20240307_docker-quick-start/image-20240308112314603.png data-srcset="/20240307_docker-quick-start/image-20240308112314603.png, /20240307_docker-quick-start/image-20240308112314603.png 1.5x, /20240307_docker-quick-start/image-20240308112314603.png 2x" data-sizes=auto alt=/20240307_docker-quick-start/image-20240308112314603.png width=590 height=217></a><figcaption class=image-caption></figcaption></figure></p></li><li><p><code>-e KEY=VALUE</code>: set environment variable</p></li><li><p><code>[repository]:[tag]</code>: set the name and tag of image. If the tag is omitted, it defaults to the latest version.</p></li></ul><h2 id=common-commands>Common Commands</h2><p><figure><a class=lightgallery href=/20240307_docker-quick-start/image-20240308134551985.png title=image-20240308134551985 data-thumbnail=/20240307_docker-quick-start/image-20240308134551985.png data-sub-html="<h2> </h2><p>image-20240308134551985</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/20240307_docker-quick-start/image-20240308134551985.png data-srcset="/20240307_docker-quick-start/image-20240308134551985.png, /20240307_docker-quick-start/image-20240308134551985.png 1.5x, /20240307_docker-quick-start/image-20240308134551985.png 2x" data-sizes=auto alt=/20240307_docker-quick-start/image-20240308134551985.png width=1062 height=414></a><figcaption class=image-caption></figcaption></figure></p><ul><li>docker pull: <code>docker image pull [OPTIONS] NAME[:TAG|@DIGEST]</code><ul><li>Most of your images will be created on top of a base image from the Docker Hub registry. To download a particular image, or set of images (i.e., a repository), use <code>docker pull</code>.</li></ul></li><li>docker push: <code>docker image push [OPTIONS] NAME[:TAG]</code><ul><li>Use docker image push to share your images to the Docker Hub registry or to a self-hosted one.</li></ul></li><li>docker images: <code>docker image ls [OPTIONS] [REPOSITORY[:TAG]]</code><ul><li>The default <code>docker images</code> will show all top level images, their repository and tags, and their size.</li></ul></li><li>docker rm: <code>docker image rm [OPTIONS] IMAGE [IMAGE...]</code><ul><li>Removes (and un-tags) one or more images from the host node. If an image has multiple tags, using this command with the tag as a parameter only removes the tag. If the tag is the only one for the image, both the image and the tag are removed.</li></ul></li><li>docker build: <code>docker image build [OPTIONS] PATH | URL | -</code><ul><li>The <code>docker build</code> command builds Docker images from a Dockerfile and a &ldquo;context&rdquo;. A build&rsquo;s context is the set of files located in the specified <code>PATH</code> or <code>URL</code>. The build process can refer to any of the files in the context.</li></ul></li><li>docker container ls: <code>docker container ls [OPTIONS]</code><ul><li>List containers</li><li>Aliases: <code>docker container list</code> <code>docker container ps</code> <code>docker ps</code></li></ul></li><li>docker container exec: <code>docker container exec [OPTIONS] CONTAINER COMMAND [ARG...]</code><ul><li>The <code>docker exec</code> command runs a new command in a running container. The command you specify with <code>docker exec</code> only runs while the container&rsquo;s primary process (<code>PID 1</code>) is running, and it isn&rsquo;t restarted if the container is restarted.</li></ul></li></ul><h2 id=data-volume>Data Volume</h2><p>A data <code>volume</code> is a special directory that can be used by one or multiple containers. It bypasses the UFS and provides several useful features:</p><ul><li>Data <code>volumes</code> can be shared and reused between containers.</li><li>Modifications to a data <code>volume</code> take effect immediately.</li><li>Updating a data <code>volume</code> does not affect the underlying image.</li><li>Data <code>volumes</code> persist even if the container is deleted.</li></ul><p><figure><a class=lightgallery href=/20240307_docker-quick-start/image-20240308143228913.png title=image-20240308143228913 data-thumbnail=/20240307_docker-quick-start/image-20240308143228913.png data-sub-html="<h2> </h2><p>image-20240308143228913</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/20240307_docker-quick-start/image-20240308143228913.png data-srcset="/20240307_docker-quick-start/image-20240308143228913.png, /20240307_docker-quick-start/image-20240308143228913.png 1.5x, /20240307_docker-quick-start/image-20240308143228913.png 2x" data-sizes=auto alt=/20240307_docker-quick-start/image-20240308143228913.png width=1536 height=662></a><figcaption class=image-caption></figcaption></figure></p><h2 id=custom-java-image>Custom Java Image</h2><p>The steps to build a Java image are as follows:</p><ol><li>Prepare a Linux runtime environment.</li><li>Install JRE and configure environment variables.</li><li>Copy the JAR file(s) into the image.</li><li>Write a startup script.</li></ol><blockquote><p>Add package, dependency, config, etc. Each operation will create a new <code>Layer</code></p><p><figure><a class=lightgallery href=/20240307_docker-quick-start/image-20240308150334866.png title=image-20240308150334866 data-thumbnail=/20240307_docker-quick-start/image-20240308150334866.png data-sub-html="<h2> </h2><p>image-20240308150334866</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/20240307_docker-quick-start/image-20240308150334866.png data-srcset="/20240307_docker-quick-start/image-20240308150334866.png, /20240307_docker-quick-start/image-20240308150334866.png 1.5x, /20240307_docker-quick-start/image-20240308150334866.png 2x" data-sizes=auto alt=/20240307_docker-quick-start/image-20240308150334866.png width=452 height=284></a><figcaption class=image-caption></figcaption></figure></p></blockquote><h2 id=layer>Layer</h2><p>The order of Dockerfile instructions matters. A Docker build consists of a series of ordered build instructions. Each instruction in a Dockerfile roughly translates to an image layer. The following diagram illustrates how a Dockerfile translates into a stack of layers in a container image.</p><p><figure><a class=lightgallery href=/20240307_docker-quick-start/layers.png title="From Dockerfile to layers" data-thumbnail=/20240307_docker-quick-start/layers.png data-sub-html="<h2> </h2><p>From Dockerfile to layers</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/20240307_docker-quick-start/layers.png data-srcset="/20240307_docker-quick-start/layers.png, /20240307_docker-quick-start/layers.png 1.5x, /20240307_docker-quick-start/layers.png 2x" data-sizes=auto alt=/20240307_docker-quick-start/layers.png width=2977 height=1177></a><figcaption class=image-caption></figcaption></figure></p><h3 id=cached-layers>Cached layers</h3><p>When you run a build, the builder attempts to reuse layers from earlier builds. If a layer of an image is unchanged, then the builder picks it up from the build cache. If a layer has changed since the last build, that layer, and all layers that follow, must be rebuilt.</p><p>The Dockerfile from the previous section copies all project files to the container (<code>COPY . .</code>) and then downloads application dependencies in the following step (<code>RUN go mod download</code>). If you were to change any of the project files, then that would invalidate the cache for the <code>COPY</code> layer. It also invalidates the cache for all of the layers that follow.</p><p><figure><a class=lightgallery href=/20240307_docker-quick-start/cache-bust.png title="Layer cache is bust" data-thumbnail=/20240307_docker-quick-start/cache-bust.png data-sub-html="<h2> </h2><p>Layer cache is bust</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/20240307_docker-quick-start/cache-bust.png data-srcset="/20240307_docker-quick-start/cache-bust.png, /20240307_docker-quick-start/cache-bust.png 1.5x, /20240307_docker-quick-start/cache-bust.png 2x" data-sizes=auto alt=/20240307_docker-quick-start/cache-bust.png width=2742 height=1005></a><figcaption class=image-caption></figcaption></figure></p><h2 id=dockerfile>Dockerfile</h2><p>A Dockerfile is a text document in which you define the build steps for your application.</p><table><thead><tr><th>Instruction</th><th>Describe</th><th>Example</th></tr></thead><tbody><tr><td>FROM</td><td>Set base image</td><td>FROM centos:6</td></tr><tr><td>ENV</td><td>Set environment variable</td><td>ENV key value</td></tr><tr><td>COPY</td><td>Copy files from local to image folder</td><td>COPY ./jrell.tar.gz /tmp</td></tr><tr><td>RUN</td><td>Run Linux shell, usually a install shell</td><td>RUN tar -zxvf /tmp/jrell.tar.gz && EXPORTS path=/tmp/jrell:$path</td></tr><tr><td>EXPOSE</td><td>Listening port, image user can check log form this port</td><td>EXPOSE 8080</td></tr><tr><td>ENTRYPOINT</td><td>Application start script in Image, trig when container running</td><td>ENTRYPOINT java -jar **.jar</td></tr></tbody></table><p>Example</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=c># set base image</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>FROM</span><span class=s> ubuntu:16.04</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># set env variables</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENV</span> <span class=nv>JAVA_DIR</span><span class=o>=</span>/usr/Local<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># copy jdk and java package</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> ./jdk8.tar.gz <span class=nv>$JAVA_DIR</span>/<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> ./docker-demo.jar /tmp/app.jar<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># install JDK</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> <span class=nb>cd</span> <span class=nv>$JAVA_DIR</span> <span class=se>\ </span><span class=o>&amp;&amp;</span> tar -xf ./jdk8.tar.gz <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=o>&amp;&amp;</span> mv ./jdk1.8.0_144 ./java8<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># set env variables</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENV</span> <span class=nv>JAVA_HOME</span><span class=o>=</span><span class=nv>$JAVA_DIR</span>/java8<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENV</span> <span class=nv>PATH</span><span class=o>=</span><span class=nv>$PATH</span>:<span class=nv>$JAVA_HOME</span>/bin<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># java start command</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENTRYPOINT</span> <span class=p>[</span><span class=s2>&#34;java&#34;</span><span class=p>,</span> <span class=s2>&#34;-jar&#34;</span><span class=p>,</span> <span class=s2>&#34;/app.jar&#34;</span><span class=p>]</span><span class=err>
</span></span></span></code></pre></td></tr></table></div></div><p>As the same we can use JDK as the base image to simplify the process</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=k>FROM</span><span class=s> openjdk:11.0-jre-buster</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> docker-demo.jar /app.jar<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ENTRYPOINT</span> <span class=p>[</span><span class=s2>&#34;java&#34;</span><span class=p>,</span> <span class=s2>&#34;-jar&#34;</span><span class=p>,</span> <span class=s2>&#34;/app.jar&#34;</span><span class=p>]</span><span class=err>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=network>Network</h2><p>By default, all <code>containers</code> are connected to a virtual bridge network in Docker using the <code>bridge</code> mode.</p><p><figure><a class=lightgallery href=/20240307_docker-quick-start/image-20240308173223154.png title=image-20240308173223154 data-thumbnail=/20240307_docker-quick-start/image-20240308173223154.png data-sub-html="<h2> </h2><p>image-20240308173223154</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/20240307_docker-quick-start/image-20240308173223154.png data-srcset="/20240307_docker-quick-start/image-20240308173223154.png, /20240307_docker-quick-start/image-20240308173223154.png 1.5x, /20240307_docker-quick-start/image-20240308173223154.png 2x" data-sizes=auto alt=/20240307_docker-quick-start/image-20240308173223154.png width=1412 height=614></a><figcaption class=image-caption></figcaption></figure></p><p>Containers need to be joined to a custom network in order to access each other using their container names.</p><table><thead><tr><th>Command</th><th>Describe</th></tr></thead><tbody><tr><td>docker network create</td><td>create a network</td></tr><tr><td>docker network ls</td><td>list all network</td></tr><tr><td>docker network rm</td><td>delete network</td></tr><tr><td>docker network prune</td><td>clear unused network</td></tr><tr><td>docker network connect</td><td>set one container join connect network</td></tr><tr><td>docker network disconnect</td><td>set one container join disconnect network</td></tr><tr><td>docker network inspect</td><td>check one network details</td></tr></tbody></table></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span></span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/docker/>Docker</a>,&nbsp;<a href=/tags/devops/>DevOps</a>,&nbsp;<a href=/tags/ci/cd/>CI/CD</a>,&nbsp;<a href=/tags/linux/>Linux</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/20240125_dontlearneverything/ class=prev rel=prev title="Don't Waste Your Time Learning Everything"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Don't Waste Your Time Learning Everything</a>
<a href=/20240308_automated-deploy-jenkins-docker/ class=next rel=next title="Automated Deployment of SpringBoot with Jenkins and Docker">Automated Deployment of SpringBoot with Jenkins and Docker<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=valine class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://valine.js.org/>Valine</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2018 - 2024</span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=/lib/valine/valine.min.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.5.0/css/lightgallery-bundle.min.css><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/valine/1.5.0/Valine.min.js></script><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.1/autocomplete.min.js></script><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/algoliasearch/4.13.1/algoliasearch-lite.umd.min.js></script><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.5.0/lightgallery.min.js></script><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.5.0/plugins/thumbnail/lg-thumbnail.min.js></script><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.5.0/plugins/zoom/lg-zoom.min.js></script><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:40},comment:{valine:{appId:"2jSYKh8PFUje3v7Ie3Nn5v1g-gzGzoHsz",appKey:"MyWn4P9G5N32q3oM5JDnlpdL",avatar:"retro",el:"#valine",emojiCDN:"https://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/",enableQQ:!0,highlight:!0,lang:"en",meta:["nick","mail","link"],pageSize:10,placeholder:"Your comment ...",recordIP:!0,visitor:!0}},lightgallery:!0,search:{algoliaAppID:"BADKNNRXHD",algoliaIndex:"index",algoliaSearchKey:"7a8c2923330a44bdd9985698e3f28e0c",highlightTag:"em",maxResultLength:8,noResultsFound:"No results found",snippetLength:40,type:"algolia"}}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-JJBX835T6W")</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=G-JJBX835T6W" async></script></body></html>